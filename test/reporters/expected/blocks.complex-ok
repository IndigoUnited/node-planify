[?25l
[7m[37m Step 1 - Sync [39m[27m
[37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m
step-1.visit

[7m[37m Step 2 - Promise [39m[27m
[37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m
step-2.enter
step-2.leave

[7m[37m Step 3 - Callback [39m[27m
[37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m
step-3.enter
step-3.leave

[7m[36m Phase 1 [39m[27m
[36m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m

  [7m[37m Step 4 - Promise [39m[27m
  [37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m
  step-4.enter
  step-4.leave

  [7m[36m Phase 1.1 [39m[27m
  [36m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m

    [7m[37m Step 5 - Sync [39m[27m
    [37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m
    step-5.visit
    Will throw an error

    [7m[31m ERROR [39m[27m
    [31m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m
    Will be ignored

    Stack:  [0m
    [0m  [0m[90m-[0m [0m[93mcomplex-ok.js[0m[90m:[0m[93m41[0m[37m [0m[37mphase.step[0m
    [0m  [0m  [0m[90m/Users/andrecruz/Work/indigo/node-planify/test/fixtures/complex-ok.js:41:23[0m
    [0m  [0m[90m-[0m [0m[93mpromisify.js[0m[90m:[0m[93m31[0m[37m [0m[37mObject.fn[0m
    [0m  [0m  [0m[90m/Users/andrecruz/Work/indigo/node-planify/lib/promisify.js:31:39[0m
    [0m  [0m[90m-[0m [0m[93mrun.js[0m[90m:[0m[93m80[0m[37m [0m[37mrunStep[0m
    [0m  [0m  [0m[90m/Users/andrecruz/Work/indigo/node-planify/lib/run.js:80:17[0m
    [0m  [0m[90m-[0m [0m[93mrun.js[0m[90m:[0m[93m136[0m[37m [0m[37mnotify.then[0m
    [0m  [0m  [0m[90m/Users/andrecruz/Work/indigo/node-planify/lib/run.js:136:40[0m
    [0m  [0m[90m-[0m [0m[93mutil.js[0m[90m:[0m[93m16[0m[37m [0m[37mtryCatcher[0m
    [0m  [0m  [0m[90m[node-planify]/[bluebird]/js/release/util.js:16:23[0m
    [0m  [0m[90m-[0m [0m[93mpromise.js[0m[90m:[0m[93m510[0m[37m [0m[37mPromise._settlePromiseFromHandler[0m
    [0m  [0m  [0m[90m[node-planify]/[bluebird]/js/release/promise.js:510:31[0m
    [0m  [0m[90m-[0m [0m[93mpromise.js[0m[90m:[0m[93m567[0m[37m [0m[37mPromise._settlePromise[0m
    [0m  [0m  [0m[90m[node-planify]/[bluebird]/js/release/promise.js:567:18[0m
    [0m  [0m[90m-[0m [0m[93mpromise.js[0m[90m:[0m[93m604[0m[37m [0m[37mPromise._settlePromiseCtx[0m
    [0m  [0m  [0m[90m[node-planify]/[bluebird]/js/release/promise.js:604:10[0m
    [0m  [0m[90m-[0m [0m[93masync.js[0m[90m:[0m[93m143[0m[37m [0m[37mAsync._drainQueue[0m
    [0m  [0m  [0m[90m[node-planify]/[bluebird]/js/release/async.js:143:12[0m
    [0m  [0m[90m-[0m [0m[93masync.js[0m[90m:[0m[93m148[0m[37m [0m[37mAsync._drainQueues[0m
    [0m  [0m  [0m[90m[node-planify]/[bluebird]/js/release/async.js:148:10[0m
    [0m  [0m[90m-[0m [0m[93masync.js[0m[90m:[0m[93m17[0m[37m [0m[37mImmediate.Async.drainQueues[0m
    [0m  [0m  [0m[90m[node-planify]/[bluebird]/js/release/async.js:17:14[0m
    [0m  [0m[90m-[0m [0m[93mtimers.js[0m[90m:[0m[93m666[0m[37m [0m[37mrunCallback[0m
    [0m  [0m  [0m[90mtimers.js:666:20[0m
    [0m  [0m[90m-[0m [0m[93mtimers.js[0m[90m:[0m[93m639[0m[37m [0m[37mtryOnImmediate[0m
    [0m  [0m  [0m[90mtimers.js:639:5[0m
    [0m  [0m[90m-[0m [0m[93mtimers.js[0m[90m:[0m[93m611[0m[37m [0m[37mprocessImmediate [as _immediateCallback][0m
    [0m  [0m  [0m[90mtimers.js:611:5[0m
    [0m
[7m[36m Phase 2 [39m[27m
[36m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m

  [7m[37m Step 6 - Sync [39m[27m
  [37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m
  step-6.enter
  step-6.leave

  [7m[37m Step 7 - Multiple writes [39m[27m
  [37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m
  step-7.visit
  foo
  barbaz
  hello
  there

[7m[37m Step 8 - Sync [39m[27m
[37m━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━[39m
step-8.visit

Completed 8 steps in [90m350ms[39m
[?25h